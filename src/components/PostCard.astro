---
import { Picture } from 'astro:assets';

import {slugify, formatDate} from "../js/utils";

import Link from './Link.astro';

const { frontmatter, url, tagType } = Astro.props;

const Tag = tagType;

const { title, description, date, category, author, image} = frontmatter;
---

<article class="card">
    
        <small>
            <a href={`/category/${slugify(category)}`} class="badge">{category}</a>
        </small>
        <a href={url} aria-hidden="true" tabindex="-1">
          <Picture 
            src={image.src} 
            width="400" 
            height="250" 
            formats={['avif', 'webp']} 
            alt={image.alt} 
           />  
        </a>
        <div class="content">
            <div>
                <Tag class="h3"><a href={url}>{title}</a></Tag>
                <small>by <a href={`/author/${slugify(author)}`}>{author}</a> - {formatDate(date)}</small>  
            </div>
            <p>{description}</p>
            <Link 
                href={url}
                text="Подробнее"
                style="secondary"
            />
        </div>
        
</article>